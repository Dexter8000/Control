<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Completo</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/dashboard.css">
    <link rel="stylesheet" href="/shared-components.css">
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        body{font-family:'Inter',sans-serif;background:var(--bg-secondary);color:var(--text-primary);padding:0;margin:0;}
        header{background:var(--bg-primary);padding:1rem 2rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 2px 4px rgba(0,0,0,0.1);}
        h1{font-size:1.5rem;margin:0;display:flex;align-items:center;gap:.5rem;}
        .controls{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap;margin-bottom:1rem;}
        .controls input,.controls select{padding:.5rem;border:1px solid var(--border-light);border-radius:4px;}
        table{width:100%;border-collapse:collapse;}
        th,td{padding:.5rem;text-align:left;border-bottom:1px solid var(--border-light);}
        th{cursor:pointer;background:var(--bg-primary);}
        tr:nth-child(even){background:var(--bg-hover);}
        .pagination{margin-top:.5rem;display:flex;justify-content:center;gap:.5rem;}
        button{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;}
        .btn-primary{background:var(--primary-blue);color:#fff;}
        .btn-secondary{background:var(--bg-primary);color:var(--text-primary);border:1px solid var(--border-light);}
        .section{margin:1rem 2rem;}
        .chart-box{max-width:600px;margin:2rem auto;position:relative;}
        .chart-box table{width:100%;}
        #datosIncompletos ul{margin-left:1.2rem;}
    </style>
</head>
<body>
<header>
    <h1><i data-feather="bar-chart-2"></i> Panel Completo de An치lisis</h1>
    <div>
        <button class="btn-secondary" onclick="window.location.href='/dashboard'">Cerrar Panel</button>
        <button class="btn-secondary" id="btnImprimir">Imprimir An치lisis</button>
        <button class="btn-primary" id="btnExportar">Exportar An치lisis</button>
    </div>
</header>
<main class="section">
    <div class="controls">
        <input type="text" id="search" placeholder="Buscar...">
        <select id="departamentoFilter"><option value="">Todos los departamentos</option></select>
        <select id="rangoFilter"><option value="">Todos los rangos</option></select>
    </div>
    <table id="tabla-empleados">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Rango</th>
                <th>Departamento</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <div class="pagination">
        <button id="cargarMas">Cargar m치s</button>
    </div>

    <div class="chart-box">
        <h2>Rangos por Departamento</h2>
        <input type="text" id="buscar-rangos-departamento" placeholder="Buscar...">
        <table id="tabla-rangos-departamento">
            <thead>
                <tr>
                    <th data-col="rango_nombre">Rango</th>
                    <th data-col="departamento_nombre">Departamento</th>
                    <th data-col="cantidad">Cantidad</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="chart-box">
        <h2>Cantidad de Rangos</h2>
        <input type="text" id="buscar-cantidad-rangos" placeholder="Buscar...">
        <table id="tabla-cantidad-rangos">
            <thead>
                <tr>
                    <th data-col="rango_nombre">Rango</th>
                    <th data-col="cantidad">Cantidad</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div class="chart-box">
        <h2>Departamentos Totales: <span id="totalDepartamentos">0</span></h2>
    </div>
    <div class="chart-box">
        <h2>Datos Incompletos</h2>
        <div id="datosIncompletos"><p>Cargando...</p></div>
    </div>
</main>
<script src="/departamentos-utils.js"></script>
<script src="/panel-completo.js"></script>
<script>feather.replace();</script>
</body>
</html>
